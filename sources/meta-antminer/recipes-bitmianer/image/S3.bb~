export IMAGE_BASENAME = "antminer"
IMAGE_INSTALL = " \
	busybox \
	base-files \
	base-passwd \
	initscripts \
	sysvinit \
	sysvinit-pidof \
	angstrom-version \
	tinylogin \
	i2c-tools \
	screen \
	dropbear \
	libcurl \
	lighttpd \
	dtc \
	stunnel \
	initc-bin \
	openssl \
	mtd-utils \
	curl \
	udev \
	monitor-recobtn \
	test-btn \
	ntp \
	ntpdate \
	netbase \
	avahi \
	led-blink \
	cgminer \
	spitools \
"
#omap3-mkcard 			   
#cgminer 

inherit image

DEFAULT_SYS_PASSWORD = "password"

do_rootfs_append() {
	echo "do_build_append"
	echo ${DEFAULT_SYS_PASSWORD} | sudo -S -k mkdir -p /tftpboot && cd /tftpboot

	if [ -f "initramfs.bin" ]; 
		then echo "file initramfs.bin exists"
	else 
		echo ${DEFAULT_SYS_PASSWORD} | sudo -S -k touch initramfs.bin
	fi
	if [ -f "initramfs.bin.SD" ];
		then echo "file initramfs.bin.SD exists"
	else 
		echo ${DEFAULT_SYS_PASSWORD} | sudo -S -k touch initramfs.bin.SD
	fi
	echo ${DEFAULT_SYS_PASSWORD} | sudo -S -k cp -rf /home/rex/eli-setup-scripts/deploy/eglibc/images/beaglebone/Angstrom-antminer-eglibc-ipk-v2013.12-beaglebone.rootfs.cpio.gz.u-boot /tftpboot/initramfs.bin
	echo ${DEFAULT_SYS_PASSWORD} | sudo -S -k cp -rf /home/rex/eli-setup-scripts/deploy/eglibc/images/beaglebone/Angstrom-antminer-eglibc-ipk-v2013.12-beaglebone.rootfs.cpio.gz.u-boot /tftpboot/initramfs.bin.SD
}

